<div id="lista" ng-init="vm.refreshList()"> <div class="row"> <h3>Filtros de atenciones</h3> <div class="row"> <div class="large-4 columns"> <span>Estado</span> <select ng-model="vm.filters.status" ng-change="vm.filter()" ng-disabled="vm.loading"> <option value="">Todos los estados</option> <option value="Agendada">Agendada</option> <option value="Reagendada">Reagendada</option> <option value="Confirmada">Confirmada</option> </select> </div> <div class="large-4 columns"> <span>Establecimiento</span> <select ng-model="vm.filters.healthCareCenter" ng-change="vm.filter()" ng-disabled="vm.loading"> <option value="" ng-if="!vm.loading">Todos los establecimientos</option> <option ng-repeat="healthCareCenter in vm.filters.healthCareCenterValues" ng-if="!vm.loading">{{healthCareCenter}}</option> <option value="" ng-if="vm.loading">Cargando datos...</option> </select> </div> <div class="large-4 columns"> <span>Buscar</span> <input type="text" placeholder="Escribir información cuales quiera..." ng-model="vm.searchText" ng-disabled="vm.loading" ng-change="vm.searchAppointments(vm.searchText)"> </div> <span></span> </div> </div> <div class="row"> <h4 class="large-12 columns"> Atenciones <span class="right"> <span class="pointer" style="margin-right:10px" ng-click="vm.crono.edit()"> <i class="fi-clock"></i> {{vm.crono.minutes.current}}:{{vm.crono.seconds.current}} </span> <span class="pointer" style="margin-right:10px" ng-click="vm.refreshList()"> <i class="fi-refresh"></i> Refrescar </span> <span class="pointer" ng-click="vm.exportToExcel()"> <i class="fi-download"></i> Exportar </span> </span> </h4> <table class="large-12 columns tableStyle"> <thead> <tr> <th></th> <th class="selectionable" ng-class="vm.order.order" ng-click="vm.orderBy('patient')"> Paciente <i class="fi-play" ng-if="vm.order.current === 'patient'"></i> </th> <th class="selectionable" ng-class="vm.order.order" ng-click="vm.orderBy('date')"> Fecha <i class="fi-play" ng-if="vm.order.current === 'date'"></i> </th> <th colspan="2">Teléfono</th> <th>Centro Médico</th> <th class="selectionable" ng-class="vm.order.order" ng-click="vm.orderBy('specialty')"> Tipo profesional <i class="fi-play" ng-if="vm.order.current === 'specialty'"></i> </th> <th class="selectionable" ng-class="vm.order.order" ng-click="vm.orderBy('typeAttention')"> Tipo de atención <i class="fi-play" ng-if="vm.order.current === 'typeAttention'"></i> </th> <th>Nombre profesional</th> <th class="selectionable" ng-class="vm.order.order" ng-click="vm.orderBy('status')"> Estado <i class="fi-play" ng-if="vm.order.current === 'status'"></i> </th> <th> Tipo </th> <th></th> </tr> </thead> <tbody> <tr ng-class="{active: (vm.appointmentSelected === appointment.id), success: (appointment.status !== 'Agendada')}" ng-repeat="appointment in vm.pendingAppointmentsFiltered" ng-if="(vm.searchText && appointment.search) || vm.searchText.length < 3" ng-click="(vm.appointmentSelected !== appointment.id) ? vm.appointmentSelected = appointment.id:vm.appointmentSelected = undefined;"> <td title="Marcar cita" class="indexAppointment">{{appointment.itemId}}</td> <td>{{appointment.patient.name}}</td> <td>{{appointment.date | date:'EEEE' | NameOfDayFilter}} {{appointment.date | date:'dd/MM/yyyy HH:mm'}}</td> <td style="border-right:0;padding-right:0"> <i class="has-tip fi-telephone" ng-if="appointment.patient.telephone"></i><br> <i class="has-tip fi-tablet-portrait" ng-if="appointment.patient.cellphone"></i> </td> <td class="center"> {{appointment.patient.telephone | TelephoneFilter:'clear'}}<br> {{appointment.patient.cellphone | TelephoneFilter:'clear'}} </td> <td>{{appointment.healthCareCenter.name}}</td> <td>{{appointment.specialty.name}}</td> <td>{{appointment.typeAttention.name}}</td> <td>{{appointment.professional.name}}</td> <td style="text-align:center"> <img src="../assets/img/check.png" ng-if="appointment.status === 'Confirmada'" style="display:inline-block" title="Confirmada"> <img src="../assets/img/calendar.png" ng-if="appointment.status === 'Agendada'" style="display:inline-block" title="Agendada"> <img src="../assets/img/reAppointment.png" ng-if="appointment.status === 'Reagendada'" style="display:inline-block" title="Reagendada"> </td> <td>{{(appointment.idCase) ? 'Web':'Presencial'}}</td> <td> <i class="fi-pencil" ng-click="vm.openEditAppointment(appointment); (vm.appointmentSelected !== appointment.id)?vm.appointmentSelected = undefined:vm.appointmentSelected = appointment.id;" ng-if="appointment.idCase"></i> </td> </tr> <tr ng-if="vm.loading"> <td colspan="12" class="nobody bold center"> Cargando atenciones... <span load-icon="blackLoad"></span> </td> </tr> <tr ng-if="!vm.pendingAppointmentsFiltered.length && !vm.loading"> <td colspan="12" class="nobody bold center"> No existen atenciones disponibles. </td> </tr> </tbody> </table> </div> </div> <div ui-view="modalesAtencion"></div> <script type="text/ng-template" id="cronoModal.html"><h3 class="row">Parametros de actualización</h3>
	<label class="large-6 columns noPaddingLeft">
		<strong>Minutos:</strong>
		<input type="number" min="5" ng-model="minutes" ng-change="change('minutes', minutes)" />
	</label>
	<label class="large-6 columns noPaddingRight">
		<strong>Segundos:</strong>
		<input type="number" min="0" ng-model="seconds" ng-change="change('seconds', seconds)" />
	</label>
	<button class="button" ng-click="salir()">Salir</button></script>