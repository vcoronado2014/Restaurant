<section class="row" ng-init="vm.reset();"> <h3 class="large-12 columns">Búsqueda por problema de salud</h3> <div class="row identificacionPaciente"> <span class="large-12 columns">Establecimiento: {{vm.patient.healthCareCenter.name}}</span> </div> <div class="filters row"> <div class="large-6 columns"> <label> <span>Problema de salud</span> <select ng-model="vm.healthProblem" ng-change="(!vm.healthProblem)?vm.specialtyFiltered = vm.typeAttentionFiltered = vm.professionalFiltered = undefined:false; vm.filter(false, vm.healthProblem, undefined, true);" ng-disabled="!vm.filteredAppointments.length && !vm.healthProblem"> <option ng-repeat="(key, value) in vm.healthProblems">{{key}}</option> </select> </label> </div> <div class="large-6 columns"> <label> <span>Tipo profesional</span> <select ng-model="vm.specialtyFiltered" ng-change="vm.filter()" ng-disabled="!vm.healthProblem||!vm.filteredAppointments.length"> <option ng-if="!vm.healthProblem||!vm.filteredAppointments.length||!vm.specialtyFiltered" value="">Sin filtro</option> <option ng-repeat="specialty in vm.specialties" ng-if="vm.specialties.length > 1">{{specialty}}</option> <option ng-init="vm.specialtyFiltered = vm.specialties[0]" ng-if="vm.specialties.length === 1 && vm.healthProblem">{{vm.specialties[0]}}</option> </select> </label> </div> <div class="large-6 columns"> <label> <span>Tipo de atención</span> <select ng-model="vm.typeAttentionFiltered" ng-change="vm.filter()" ng-disabled="!vm.healthProblem||!vm.filteredAppointments.length"> <option ng-if="!vm.healthProblem||!vm.filteredAppointments.length||!vm.typeAttentionFiltered" value="">Sin filtro</option> <option ng-repeat="typeAttention in vm.typesAttentions" ng-if="vm.typesAttentions.length > 1">{{typeAttention}}</option> <option ng-init="vm.typeAttentionFiltered = vm.typesAttentions[0]" ng-if="vm.typesAttentions.length === 1 && vm.healthProblem">{{vm.typesAttentions[0]}}</option> </select> </label> </div> <div class="large-6 columns"> <label> <span>Nombre profesional</span> <select ng-model="vm.professionalFiltered" ng-change="vm.filter()" ng-disabled="!vm.healthProblem||!vm.filteredAppointments.length"> <option ng-if="!vm.healthProblem||!vm.filteredAppointments.length||!vm.professionalFiltered" value="">Sin filtro</option> <option ng-repeat="professional in vm.professionals" ng-if="vm.professionals.length > 1">{{professional}}</option> <option ng-init="vm.professionalFiltered = vm.professionals[0]" ng-if="vm.professionals.length === 1 && vm.healthProblem">{{vm.professionals[0]}}</option> </select> </label> </div> <div class="large-12 columns botonera"> <button class="button" ng-click="vm.state.appointmentsStart = vm.filteredAppointments[0][0].date; vm.viewDiary(vm.filteredAppointments)">Ver agenda</button> </div> </div> </section>